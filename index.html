<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vocabulary Visuals</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{--bg:#f8f9fa;--card-bg:#fff;--text:#1a1a2e;--sub:#555;--accent:#4361ee;--accent-hover:#3a56d4;--border:#e0e0e0;--shadow:0 2px 12px rgba(0,0,0,.08)}
@media(prefers-color-scheme:dark){
:root{--bg:#0f0f1a;--card-bg:#1a1a2e;--text:#e8e8f0;--sub:#aaa;--accent:#6c8aff;--accent-hover:#8da4ff;--border:#2a2a3e;--shadow:0 2px 12px rgba(0,0,0,.3)}
}
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Noto Sans KR',sans-serif;background:var(--bg);color:var(--text);min-height:100vh;display:flex;flex-direction:column;align-items:center;padding:2rem 1rem}
header{text-align:center;margin-bottom:2.5rem}
header h1{font-size:1.8rem;font-weight:700;margin-bottom:.4rem}
header p{color:var(--sub);font-size:.95rem}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1.2rem;width:100%;max-width:900px}
.card{background:var(--card-bg);border:1px solid var(--border);border-radius:12px;padding:1.5rem;text-decoration:none;color:var(--text);transition:transform .15s,box-shadow .15s;box-shadow:var(--shadow)}
.card:hover{transform:translateY(-3px);box-shadow:0 6px 20px rgba(0,0,0,.12)}
.card h2{font-size:1.2rem;font-weight:600;margin-bottom:.5rem}
.card .meta{color:var(--sub);font-size:.85rem;line-height:1.5}
.card .arrow{display:inline-block;margin-top:.8rem;color:var(--accent);font-size:.9rem;font-weight:500}
.card:hover .arrow{color:var(--accent-hover)}
#loading{color:var(--sub);font-size:.95rem;margin-top:2rem}
#error{color:#e74c3c;font-size:.95rem;margin-top:2rem;display:none}
footer{margin-top:auto;padding-top:3rem;color:var(--sub);font-size:.8rem;text-align:center}

/* theme toggle */
.theme-toggle{position:fixed;top:1rem;right:1rem;background:var(--card-bg);border:1px solid var(--border);border-radius:8px;padding:.4rem .6rem;cursor:pointer;font-size:1.1rem;line-height:1;z-index:100}

[data-theme="light"]{--bg:#f8f9fa;--card-bg:#fff;--text:#1a1a2e;--sub:#555;--accent:#4361ee;--accent-hover:#3a56d4;--border:#e0e0e0;--shadow:0 2px 12px rgba(0,0,0,.08)}
[data-theme="dark"]{--bg:#0f0f1a;--card-bg:#1a1a2e;--text:#e8e8f0;--sub:#aaa;--accent:#6c8aff;--accent-hover:#8da4ff;--border:#2a2a3e;--shadow:0 2px 12px rgba(0,0,0,.3)}
</style>
</head>
<body>

<button class="theme-toggle" id="themeBtn" aria-label="Toggle theme"></button>

<header>
  <h1>ğŸ“š Vocabulary Visuals</h1>
  <p>ì˜í¬ì 1ë“±ê¸‰ ë§Œë“¤ê¸° â€” ë‹¨ì–´ ì‹œê°í™” í•™ìŠµ</p>
</header>

<div class="grid" id="chapterGrid"></div>
<div id="loading">ì±•í„° ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
<div id="error"></div>

<footer>
  Vocabulary Visuals &copy; 2026
</footer>

<script>
(function(){
  // Theme
  const themeBtn = document.getElementById('themeBtn');
  const stored = localStorage.getItem('theme');
  const prefersDark = window.matchMedia('(prefers-color-scheme:dark)').matches;
  let dark = stored ? stored === 'dark' : prefersDark;
  function applyTheme(){
    document.documentElement.setAttribute('data-theme', dark ? 'dark' : 'light');
    themeBtn.textContent = dark ? 'â˜€ï¸' : 'ğŸŒ™';
  }
  applyTheme();
  themeBtn.addEventListener('click', function(){
    dark = !dark;
    localStorage.setItem('theme', dark ? 'dark' : 'light');
    applyTheme();
  });

  // Load manifest
  const grid = document.getElementById('chapterGrid');
  const loading = document.getElementById('loading');
  const error = document.getElementById('error');

  fetch('manifest.json')
    .then(function(r){ return r.json(); })
    .then(function(chapters){
      loading.style.display = 'none';
      // Sort by folder name (natural sort)
      chapters.sort(function(a, b){ return a.folder.localeCompare(b.folder, 'ko', {numeric: true}); });

      if(chapters.length === 0){
        error.textContent = 'ë“±ë¡ëœ ì±•í„°ê°€ ì—†ìŠµë‹ˆë‹¤.';
        error.style.display = 'block';
        return;
      }

      chapters.forEach(function(ch){
        var a = document.createElement('a');
        a.className = 'card';
        a.href = ch.folder + '/index.html';

        var h2 = document.createElement('h2');
        h2.textContent = ch.title;

        var meta = document.createElement('div');
        meta.className = 'meta';
        meta.textContent = ch.source_pdf;
        if(ch.deployed){
          meta.textContent += ' Â· ë°°í¬: ' + ch.deployed;
        }

        var arrow = document.createElement('span');
        arrow.className = 'arrow';
        arrow.textContent = 'í•™ìŠµí•˜ê¸° â†’';

        a.appendChild(h2);
        a.appendChild(meta);
        a.appendChild(arrow);
        grid.appendChild(a);
      });
    })
    .catch(function(err){
      loading.style.display = 'none';
      error.textContent = 'manifest.jsonì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: ' + err.message;
      error.style.display = 'block';
    });
})();
</script>
</body>
</html>
